<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <title>TheBestCouchPotatoList - Holiday Season</title>
    <meta name="description" content="Free Media for all! Festive streaming collection">

    <!-- Open Graph Meta Tags -->
    <meta property="og:url" content="https://tbcpl.lol">
    <meta property="og:type" content="website">
    <meta property="og:title" content="TheBestCouchPotatoList">
    <meta property="og:description" content="Free Media for all! ">
    <meta property="og:image" content="https://tbcpl.lol/banner.png">
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="420">

    <!-- Twitter Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta property="twitter:domain" content="tbcpl.lol">
    <meta property="twitter:url" content="https://tbcpl.lol">
    <meta name="twitter:title" content="TheBestCouchPotatoList">
    <meta name="twitter:description" content="Free Media for all! ">
    <meta name="twitter:image" content="https://tbcpl.lol/banner.png">

    <!-- Favicon -->
    <link rel="icon" href="https://tbcpl.lol/logo.png" type="image/png">
    <link rel="shortcut icon" href="https://tbcpl.lol/logo.png" type="image/png">

    <!-- Pace.js for page loading progress -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js"></script>

    <!-- Styles -->
    <link rel="stylesheet" href="./css/flash.css">
    <link rel="stylesheet" href="./ui.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mountains+of+Christmas:wght@400;700&family=Merriweather:wght@400;700&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"></noscript>
</head>

<body>
    <!-- Christmas Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="christmas-loader">
            <img src="logo.png" alt="TBCPL Logo" class="christmas-logo">
            <div class="loading-text">WELCOME BACK</div>
        </div>
    </div>

    <!-- Navigation Menu -->
    <nav class="navbar" id="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="logo.png" alt="TBCPL" class="nav-logo-img">
                TBCPL
            </a>
            <button class="nav-toggle" id="navToggle">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-menu" id="navMenu">
                <li><a href="index.html" class="nav-link active"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="about.html" class="nav-link"><i class="fas fa-info-circle"></i> About</a></li>
                <li><a href="site-request.html" class="nav-link"><i class="fas fa-plus-circle"></i> Request</a></li>
                <li><a href="dmca.html" class="nav-link"><i class="fas fa-shield-alt"></i> DMCA</a></li>
            </ul>
        </div>
    </nav>

    <!-- Floating Christmas Elements -->
    <div class="christmas-bg">
        <div class="snowflake snowflake-1">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-2">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-3">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-4">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-5">‚ùÑÔ∏è</div>
        <div class="snowflake snowflake-6">‚ùÑÔ∏è</div>
        <div class="ornament ornament-1">üî¥</div>
        <div class="ornament ornament-2">üéÑ</div>
        <div class="star star-1">‚≠ê</div>
    </div>

    <!-- Main Container -->
    <div class="container">
        <!-- Hero Section -->
        <div class="hero-section">
            <h1 class="festive-title">
                <span class="title-word">The</span>
                <span class="title-word">Best</span>
                <span class="title-word">Couch</span>
                <span class="title-word">Potato</span>
                <span class="title-word">List!</span>
            </h1>
            <div class="subtitle">üéÑ Your Festive Streaming Collection üéÅ</div>
        </div>

        <!-- Warning Section -->
        <div class="warning-card">
            <p class="warning-text">
                <strong>Before unwrapping your gifts...</strong><br>
                Download
                <a href="https://brave.com/" class="festive-link" target="_blank">
                    <img src="./assets/brave.png" alt="BRAVE Browser" class="inline-icon">
                </a>
                or use
                <a href="https://ublockorigin.com/" class="festive-link" target="_blank">
                    <img src="./assets/ublock.png" alt="Ad Blocker" class="inline-icon">
                </a>
                to avoid unwanted popups and ads!
            </p>
        </div>

        <!-- Community Section -->
        <div class="community-section-compact">
            <div class="community-links">
                <a href="https://discord.gg/Dsts8Y2jWz" target="_blank" class="community-link discord-link">
                    <img src="./assets/discord.png" alt="Discord" class="community-icon">
                    Discord
                </a>
                <a href="https://www.reddit.com/r/TBCPL/" target="_blank" class="community-link reddit-link">
                    <img src="./assets/reddit.png" alt="Reddit" class="community-icon">
                    Reddit
                </a>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="search-container">
            <input type="text" class="search-input" id="searchInput" placeholder="üîç Search for sites...">
            <div class="filter-buttons">
                <button class="filter-btn active" data-filter="all">All</button>
                <button class="filter-btn" data-filter="movies">Movies</button>
                <button class="filter-btn" data-filter="anime">Anime</button>
                <button class="filter-btn" data-filter="manga">Manga</button>
                <button class="filter-btn" data-filter="livetv">Live TV</button>
                <button class="filter-btn" data-filter="paid">Paid</button>
                <button class="filter-btn" data-filter="apps">Apps</button>
            </div>
        </div>

        <!-- Dynamic Categories Container -->
        <div id="categories-container"></div>

        <!-- Back to Top Button with Progress Circle -->
        <div class="back-to-top-wrapper" id="backToTopWrapper">
            <svg class="scroll-progress-svg" width="60" height="60">
                <circle class="scroll-progress-bg" cx="30" cy="30" r="26"></circle>
                <circle class="scroll-progress-fill" cx="30" cy="30" r="26"></circle>
            </svg>
            <button class="back-to-top" id="backToTop">
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-links">
                <a href="https://discord.gg/Dsts8Y2jWz" target="_blank" class="footer-link" title="Discord">
                    <i class="fab fa-discord"></i>
                </a>
                <a href="https://github.com/N3rdmade/TBCPL/" target="_blank" class="footer-link" title="GitHub">
                    <i class="fab fa-github"></i>
                </a>
            </div>
            <div class="footer-text">
                <p>üéÑ Crafted with Holiday Spirit üéÑ</p>
                <p>(Share responsibly)</p>
                <p class="copyright">&copy; 2025 TBCPL. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <!-- Scripts -->
    <script>
        // Load and render links from JSON
        async function loadLinks() {
            try {
                const response = await fetch('links.json');
                const data = await response.json();
                const container = document.getElementById('categories-container');

                data.categories.forEach(category => {
                    const sectionDiv = document.createElement('div');
                    sectionDiv.className = 'section';
                    sectionDiv.setAttribute('data-category', category.id);

                    // Create header
                    const header = document.createElement('h2');
                    header.className = 'section-header';
                    header.textContent = category.name;
                    sectionDiv.appendChild(header);

                    // Create links grid
                    const linksGrid = document.createElement('div');
                    linksGrid.className = 'links-grid';

                    // Filter only enabled sites
                    category.sites.filter(site => site.enabled !== false).forEach(site => {
                        const link = document.createElement('a');
                        link.href = site.url;
                        link.target = '_blank';
                        link.className = 'link-card';
                        link.setAttribute('data-name', site.name);

                        link.innerHTML = `
                            <img src="${site.logo}" alt="${site.name}" class="card-logo">
                            <span class="card-hover-text">${site.name}</span>
                        `;

                        linksGrid.appendChild(link);
                    });

                    sectionDiv.appendChild(linksGrid);
                    container.appendChild(sectionDiv);
                });

                // Observe newly created elements for reveal animation
                document.querySelectorAll('.section, .community-card, .stat-card').forEach(el => {
                    observer.observe(el);
                });
            } catch (error) {
                console.error('Error loading links:', error);
            }
        }

        // Scroll Reveal Animation Observer (defined early for use in loadLinks)
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver(function(entries) {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('reveal');
                }
            });
        }, observerOptions);

        // Loading Screen
        window.addEventListener('load', function() {
            // Load links first
            loadLinks();

            // Then handle loading screen
            setTimeout(function() {
                const loadingScreen = document.getElementById('loadingScreen');
                loadingScreen.style.opacity = '0';
                setTimeout(function() {
                    loadingScreen.style.display = 'none';
                }, 500);
            }, 1500);
        });

        // Mobile Navigation Toggle
        const navToggle = document.getElementById('navToggle');
        const navMenu = document.getElementById('navMenu');

        navToggle.addEventListener('click', function() {
            navMenu.classList.toggle('active');
            navToggle.classList.toggle('active');
        });

        // Sticky Navbar
        const navbar = document.getElementById('navbar');
        let lastScroll = 0;

        window.addEventListener('scroll', function() {
            const currentScroll = window.pageYOffset;

            if (currentScroll > 100) {
                navbar.classList.add('scrolled');
            } else {
                navbar.classList.remove('scrolled');
            }

            lastScroll = currentScroll;
        });

        // Search Functionality
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const sections = document.querySelectorAll('.section[data-category]');
            const filterButtons = document.querySelectorAll('.filter-btn');

            // Reset filter to "All" when user starts typing
            if (searchTerm !== '') {
                filterButtons.forEach(btn => btn.classList.remove('active'));
                document.querySelector('.filter-btn[data-filter="all"]').classList.add('active');
            }

            sections.forEach(section => {
                const linkCards = section.querySelectorAll('.link-card');
                let hasVisibleCards = false;

                linkCards.forEach(card => {
                    const name = card.getAttribute('data-name').toLowerCase();
                    if (name.includes(searchTerm)) {
                        card.style.display = 'flex';
                        hasVisibleCards = true;
                    } else {
                        card.style.display = 'none';
                    }
                });

                // Hide entire category if no cards match
                if (hasVisibleCards || searchTerm === '') {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        });

        // Filter Functionality
        const filterButtons = document.querySelectorAll('.filter-btn');

        filterButtons.forEach(button => {
            button.addEventListener('click', function() {
                const filter = this.getAttribute('data-filter');
                const sections = document.querySelectorAll('.section[data-category]');

                // Update active button
                filterButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');

                // Clear search
                searchInput.value = '';

                // Filter sections
                if (filter === 'all') {
                    sections.forEach(section => {
                        section.style.display = 'block';
                        section.querySelectorAll('.link-card').forEach(card => {
                            card.style.display = 'flex';
                        });
                    });
                } else {
                    sections.forEach(section => {
                        if (section.getAttribute('data-category') === filter) {
                            section.style.display = 'block';
                            section.querySelectorAll('.link-card').forEach(card => {
                                card.style.display = 'flex';
                            });
                        } else {
                            section.style.display = 'none';
                        }
                    });
                }
            });
        });

        // Initial observation for static elements
        document.querySelectorAll('.community-card, .stat-card').forEach(el => {
            observer.observe(el);
        });

        // Parallax effect for floating elements (desktop only)
        if (window.innerWidth > 768) {
            document.addEventListener('mousemove', function(e) {
                const snowflakes = document.querySelectorAll('.snowflake');
                const ornaments = document.querySelectorAll('.ornament');

                const moveX = (e.clientX / window.innerWidth - 0.5) * 20;
                const moveY = (e.clientY / window.innerHeight - 0.5) * 20;

                snowflakes.forEach((snowflake, index) => {
                    const speed = (index + 1) * 0.5;
                    snowflake.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
                });

                ornaments.forEach((ornament, index) => {
                    const speed = (index + 1) * 0.3;
                    ornament.style.transform = `translate(${moveX * speed}px, ${moveY * speed}px)`;
                });
            });
        }

        // Scroll Progress Circle & Back to Top
        const backToTopWrapper = document.getElementById('backToTopWrapper');
        const backToTop = document.getElementById('backToTop');
        const progressFill = document.querySelector('.scroll-progress-fill');

        function updateScrollProgress() {
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            const scrollHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrollPercentage = (scrollTop / scrollHeight) * 100;

            // Get current radius (changes on mobile)
            const radius = window.innerWidth <= 768 ? 21 : 26;
            const circumference = 2 * Math.PI * radius;
            const offset = circumference - (scrollPercentage / 100) * circumference;

            progressFill.style.strokeDashoffset = offset;

            // Show/hide wrapper
            if (scrollTop > 300) {
                backToTopWrapper.classList.add('show');
            } else {
                backToTopWrapper.classList.remove('show');
            }
        }

        window.addEventListener('scroll', updateScrollProgress);

        backToTop.addEventListener('click', function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        });
    </script>

    <!-- Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TD8F20DS4V"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-TD8F20DS4V');
    </script>
</body>
</html>

